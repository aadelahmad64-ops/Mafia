<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø§ÙÙŠØ§ Â· Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù„Ø¨Ø³ÙŠØ·Ø©</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Cairo', system-ui, sans-serif;
        }
        body {
            background: linear-gradient(145deg, #1e2b2e 0%, #0f1a1c 100%);
            min-height: 100vh;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 12px;
        }
        .game-container {
            max-width: 1300px;
            width: 100%;
            background: rgba(30, 40, 43, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 48px;
            padding: 24px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.7), inset 0 1px 3px rgba(255, 255, 255, 0.1);
            border: 1px solid #4f6d7a;
        }
        h1 {
            text-align: center;
            margin: 0 0 16px 0;
            font-size: 2.8rem;
            letter-spacing: 2px;
            color: #f2d8b3;
            text-shadow: 0 4px 0 #5f3e2c, 0 8px 12px black;
            font-weight: 700;
            word-break: break-word;
        }
        h1 small {
            font-size: 1.1rem;
            display: block;
            color: #c0b29a;
            text-shadow: none;
            letter-spacing: 1px;
        }
        .phase-banner {
            background: #1e2c30;
            border-radius: 60px;
            padding: 16px 24px;
            margin-bottom: 28px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 12px;
            border: 2px solid #4b6975;
            box-shadow: inset 0 2px 5px #0b1417;
        }
        .phase {
            font-size: 2rem;
            font-weight: 800;
            background: #31281e;
            padding: 10px 30px;
            border-radius: 40px;
            color: #fadfad;
            border: 2px solid #c89f70;
            box-shadow: 0 0 10px #ffd78c;
        }
        .round-info {
            color: #cddde4;
            font-size: 1.5rem;
            background: #25373d;
            padding: 6px 25px;
            border-radius: 40px;
            border: 1px solid #62828f;
        }
        .main-grid {
            display: flex;
            flex-direction: row-reverse;
            gap: 24px;
            flex-wrap: wrap;
        }
        .players-panel {
            flex: 3;
            min-width: 300px;
            background: #233237;
            border-radius: 40px;
            padding: 22px 16px;
            border: 2px solid #48626b;
        }
        .action-panel {
            flex: 2;
            min-width: 280px;
            background: #1d2b30;
            border-radius: 40px;
            padding: 22px 18px;
            border: 2px solid #6b4f3c;
            display: flex;
            flex-direction: column;
            gap: 18px;
        }
        .players-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 14px;
            justify-content: center;
            margin-top: 15px;
        }
        .player-card {
            background: #2f4147;
            border-radius: 30px;
            padding: 18px 12px 12px 12px;
            width: 150px;
            text-align: center;
            box-shadow: 0 8px 0 #142025;
            border: 2px solid #70838b;
            transition: 0.1s ease;
            cursor: pointer;
            color: white;
        }
        .player-card.selected {
            border: 5px solid #ffcf9a;
            background: #3e535a;
            transform: scale(1.02);
            box-shadow: 0 0 20px #f7c27a;
        }
        .player-name {
            font-weight: bold;
            font-size: 1.3rem;
            background: #1d2f33;
            padding: 8px 5px;
            border-radius: 40px;
            margin-bottom: 10px;
            border: 1px solid #819ca8;
        }
        .player-role {
            background: #273c42;
            border-radius: 30px;
            padding: 10px 5px;
            font-size: 1.2rem;
            border: 1px dashed #b9936c;
            margin: 5px 0;
            color: #ffd9b0;
        }
        .player-status {
            font-size: 1rem;
            background: #1b2b30;
            border-radius: 20px;
            padding: 5px;
            margin-top: 8px;
        }
        .dead .player-name, .dead .player-role {
            opacity: 0.5;
            background: #2f2f2f;
            text-decoration: line-through;
        }
        .dead {
            background: #3d3d3d;
            border-color: #7a4f4f;
        }
        .saved-tag {
            background: #2f7d4c;
            color: #c7ffb1;
            font-weight: bold;
        }
        .target-tag {
            background: #962020;
        }
        .button-mafia {
            background: #4f2e2e;
            color: #ffcaca;
            border: 2px solid #ac5a5a;
        }
        .button-doctor {
            background: #2d5540;
            color: #c3ffcf;
            border: 2px solid #5faf7a;
        }
        .button-detect {
            background: #3b476b;
            color: #d6ddff;
            border: 2px solid #819bcf;
        }
        .big-btn {
            padding: 18px 12px;
            border-radius: 60px;
            font-weight: bold;
            font-size: 1.5rem;
            width: 100%;
            cursor: pointer;
            transition: all 0.2s;
            border: none;
            box-shadow: 0 6px 0 #0f1a1c;
        }
        .big-btn:active {
            transform: translateY(5px);
            box-shadow: 0 1px 0 #0f1a1c;
        }
        .log-area {
            background: #0c1a1e;
            border-radius: 36px;
            padding: 18px;
            color: #bdd4db;
            font-size: 1.2rem;
            border: 2px solid #466b74;
            max-height: 250px;
            overflow-y: auto;
            margin-top: 15px;
        }
        .log-entry {
            border-bottom: 1px solid #38636b;
            padding: 5px 10px;
        }
        .flex-row {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            justify-content: center;
        }
        .role-hint {
            background: #1a2f35;
            border-radius: 30px;
            padding: 15px;
            color: #cac3b0;
            border: 2px solid #7f6b53;
        }
        .hidden {
            display: none !important;
        }
        .warning {
            color: #ffbaba;
            background: #9f3e3e;
            padding: 10px;
            border-radius: 30px;
            text-align: center;
        }
    </style>
</head>
<body dir="rtl">
<div class="game-container" id="gameContainer">
    <h1>ğŸ”ª Ø§Ù„Ù…Ø§ÙÙŠØ§ ğŸ”ª <small>Ù…Ø¹ Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡ Â· Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ 5 Ù„Ø§Ø¹Ø¨ÙŠÙ†</small></h1>

    <div class="phase-banner">
        <span class="phase" id="phaseDisplay">ğŸŸ£ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯</span>
        <span class="round-info" id="roundDisplay">â³ 0 Ù„Ø§Ø¹Ø¨ÙŠÙ†</span>
    </div>

    <div class="main-grid">
        <!-- Ù„ÙˆØ­Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† (ÙŠÙ…ÙŠÙ†) -->
        <div class="players-panel">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <h2 style="color:#edd5b0; margin:0;">ğŸ‘¥ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙˆÙ†</h2>
                <button id="resetBtn" style="background:#3e4d55; color:white; border-radius:40px; border:none; padding:8px 22px; font-size:1.2rem; cursor:pointer;">ğŸ”„ Ø¨Ø¯Ø§ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©</button>
            </div>
            <div class="players-grid" id="playersContainer"></div>
            <div class="role-hint" id="roleRevealArea">
                <span id="roleSecret">ğŸ‘ï¸ Ø¯ÙˆØ±Ùƒ Ø³ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§ Ø¥Ø°Ø§ ÙƒÙ†Øª Ù…Ø§ÙÙŠØ§ / Ù…Ø­Ù‚Ù‚ / Ø¯ÙƒØªÙˆØ±</span>
            </div>
        </div>

        <!-- Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø­Ø¯Ø§Ø« ÙˆØ§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª (ÙŠØ³Ø§Ø±) -->
        <div class="action-panel">
            <div style="text-align: center;">
                <h2 style="color:#e7cfaa;">âš¡ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</h2>
            </div>

            <!-- Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© -->
            <div id="setupActions">
                <button class="big-btn" id="addPlayerBtn" style="background:#4d706b; color:white;">â• Ø¥Ø¶Ø§ÙØ© Ù„Ø§Ø¹Ø¨</button>
                <button class="big-btn" id="startGameBtn" style="background:#ab8e5c; color:#1f1f1f;">â–¶ï¸ Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø© (5+ Ù„Ø§Ø¹Ø¨ÙŠÙ†)</button>
                <div style="text-align:right; padding:8px; color:#b9c9cf;">Ø£Ø¯Ø®Ù„ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† Ø¨Ø§Ù„Ø²Ø± Ø£ÙˆÙ„Ø§Ù‹</div>
            </div>

            <!-- Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø£Ø¯ÙˆØ§Ø± (ØªØ¸Ù‡Ø± Ø­Ø³Ø¨ Ø§Ù„Ù…Ø±Ø­Ù„Ø©) -->
            <div id="mafiaActions" class="hidden">
                <div class="warning" id="mafiaVoteStatus">ğŸ—³ï¸ Ø§Ù„Ù…Ø§ÙÙŠØ§: Ø§Ø®ØªØ± Ø´Ø®ØµØ§Ù‹ Ù„Ù„Ù‚ØªÙ„</div>
                <div class="flex-row">
                    <button class="big-btn button-mafia" id="mafiaVoteBtn" style="flex:2;">ğŸ”ª ØªØµÙˆÙŠØª (3..2..1)</button>
                    <button class="big-btn" id="mafiaClearVote" style="flex:1; background:#4d4d5c;">âŒ</button>
                </div>
                <p style="color:#c7b58b;">ğŸ”¹ ÙƒÙ„ Ù…Ø§ÙÙŠØ§ ÙŠØ±Ù‰ Ø²Ù…ÙŠÙ„Ù‡: Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ ØªØ¸Ù‡Ø± Ø¨Ø§Ù„Ø£Ø³ÙÙ„</p>
            </div>

            <div id="detectiveActions" class="hidden">
                <div class="warning" id="detectiveStatus">ğŸ•µï¸ Ø§Ø®ØªØ± Ø´Ø®ØµØ§Ù‹ ØªØ³ØªØ¬ÙˆØ¨Ù‡</div>
                <button class="big-btn button-detect" id="detectiveAskBtn">ğŸ” Ø§Ø³ØªØ¬ÙˆØ§Ø¨ (Ø³ØªØ±Ù‰ Ø¯ÙˆØ±Ù‡)</button>
            </div>

            <div id="doctorActions" class="hidden">
                <div class="warning" id="doctorStatus">ğŸ’Š Ø§Ø®ØªØ± Ø´Ø®ØµØ§Ù‹ Ù„ØªØ­Ù…ÙŠÙ‡ Ù‡Ø°Ù‡ Ø§Ù„Ù„ÙŠÙ„Ø©</div>
                <button class="big-btn button-doctor" id="doctorHealBtn">â¤ï¸ Ø­Ù…Ø§ÙŠØ© (Ù„Ù† ÙŠÙ…ÙˆØª)</button>
            </div>

            <!-- Ø²Ø± Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¯ÙˆØ± (Ù„ÙŠÙ„Ø§Ù‹) -->
            <button class="big-btn" id="endNightPhaseBtn" style="background:#775e44; color:#faeac6;" class="hidden">ğŸŒ™ Ø§Ù†ØªÙ‡Ù‰ Ø¯ÙˆØ±ÙŠ (ØªØ³Ø¬ÙŠÙ„)</button>

            <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù†Ù‡Ø§Ø± / Ù‚ØªÙ„ -->
            <div id="dayActions" class="hidden">
                <div class="warning" id="dayMessage">â˜€ï¸ Ø§Ù„Ù†Ù‡Ø§Ø±: Ø§Ù‚Ø±Ø£ Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù„ÙŠÙ„Ø©</div>
                <button class="big-btn" id="revealKillBtn" style="background:#c9a87c; color:#0f1c1f;">ğŸ“¢ Ù…Ù† Ù‚ÙØªÙ„ØŸ (Ø§Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø©)</button>
                <button class="big-btn" id="nextNightBtn" style="background:#476b75;">ğŸŒ™ Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ Ø§Ù„Ù„ÙŠÙ„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©</button>
            </div>

            <!-- Ø³Ø¬Ù„ Ø§Ù„Ù„Ø¹Ø¨Ø© -->
            <div class="log-area" id="logPanel">
                <div class="log-entry">âºï¸ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© ... Ø£Ø¶Ù Ù„Ø§Ø¹Ø¨ÙŠÙ†</div>
            </div>
        </div>
    </div>
</div>

<script>
(function() {
    // ---------- Ù…Ù†Ø·Ù‚ Ø§Ù„Ù„Ø¹Ø¨Ø© ----------
    let players = [];                      // Ù…ØµÙÙˆÙØ© Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†
    let phase = 'setup';                   // setup, mafiaNight, detectiveNight, doctorNight, day
    let round = 0;
    let mafiaVoteTarget = null;            // id Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø°ÙŠ ØµÙˆØª Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ù…Ø§ÙÙŠØ§
    let detectiveTarget = null;
    let doctorTarget = null;
    let savedPlayerId = null;              // Ø¢Ø®Ø± Ø´Ø®Øµ Ø­Ù…Ø§Ù‡ Ø§Ù„Ø¯ÙƒØªÙˆØ±
    // Ù…Ø¹Ø±ÙØ§Øª Ø§Ù„Ø£Ø¯ÙˆØ§Ø± Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„Ø¬Ù„Ø³Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© (Ù„Ù„ÙƒØ´Ù)
    let currentMafiaIds = [];               // ids Ø§Ù„Ù…Ø§ÙÙŠØ§
    let currentDetectiveId = null;
    let currentDoctorId = null;

    // Ø¹Ù†Ø§ØµØ± DOM
    const phaseEl = document.getElementById('phaseDisplay');
    const roundEl = document.getElementById('roundDisplay');
    const playersContainer = document.getElementById('playersContainer');
    const roleSecretEl = document.getElementById('roleSecret');
    const logPanel = document.getElementById('logPanel');

    // Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ø£Ø²Ø±Ø§Ø±
    const setupDiv = document.getElementById('setupActions');
    const mafiaDiv = document.getElementById('mafiaActions');
    const detectiveDiv = document.getElementById('detectiveActions');
    const doctorDiv = document.getElementById('doctorActions');
    const dayDiv = document.getElementById('dayActions');
    const endNightBtn = document.getElementById('endNightPhaseBtn');

    // Ø£Ø²Ø±Ø§Ø±
    const addPlayerBtn = document.getElementById('addPlayerBtn');
    const startGameBtn = document.getElementById('startGameBtn');
    const resetBtn = document.getElementById('resetBtn');
    const mafiaVoteBtn = document.getElementById('mafiaVoteBtn');
    const mafiaClearVote = document.getElementById('mafiaClearVote');
    const detectiveAskBtn = document.getElementById('detectiveAskBtn');
    const doctorHealBtn = document.getElementById('doctorHealBtn');
    const revealKillBtn = document.getElementById('revealKillBtn');
    const nextNightBtn = document.getElementById('nextNightBtn');

    // Ø¯Ø§Ù„Ø© Ø¥Ø¶Ø§ÙØ© Ø³Ø¬Ù„
    function addLog(msg) {
        const entry = document.createElement('div');
        entry.className = 'log-entry';
        entry.textContent = 'ğŸ•’ ' + new Date().toLocaleTimeString('ar-EG', {hour:'2-digit', minute:'2-digit'}) + ' â€¢ ' + msg;
        logPanel.appendChild(entry);
        logPanel.scrollTop = logPanel.scrollHeight;
    }

    // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†
    function renderPlayers() {
        let html = '';
        players.forEach(p => {
            let roleText = '';
            // Ø¹Ø±Ø¶ Ø§Ù„Ø¯ÙˆØ± Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø±Ø­Ù„Ø© ÙˆØ§Ù„Ù…Ø¹Ø±ÙØ©
            if (phase === 'setup') {
                roleText = '...';
            } else {
                // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù„Ø§Ø¹Ø¨ Ù…ÙŠØªØ§Ù‹ Ù†Ø¸Ù‡Ø± Ø¯ÙˆØ±Ù‡ Ù„Ù„Ù…Ø´Ø§Ù‡Ø¯ÙŠÙ† (ÙƒÙ„ Ø§Ù„Ø£Ø¯ÙˆØ§Ø± Ù…ÙƒØ´ÙˆÙØ© Ù„Ù„Ù…Ø´Ø±Ù/Ø§Ù„Ù…ÙŠØª)
                // Ù„ÙƒÙ† Ù†Ù„ØªØ²Ù… Ø¨Ø±ÙˆØ­ Ø§Ù„Ù„Ø¹Ø¨Ø©: Ù†Ø¸Ù‡Ø± Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¹Ø§Ø¯ÙŠ Ø¯ÙˆØ± Ù†ÙØ³Ù‡ ÙÙ‚Ø·. Ù‡Ù†Ø§ Ø³Ù‡Ù„: Ù†Ø¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ isRevealed Ù…Ø¤Ù‚Øª.
                if (p.isDead) roleText = p.role + ' ğŸ’€';
                else {
                    // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø¯ÙˆØ± Ø§Ù„Ø­Ø§Ù„ÙŠ ÙŠØ³Ù…Ø­ Ø¨Ø±Ø¤ÙŠØ© Ø£Ø¯ÙˆØ§Ø± Ø®Ø§ØµØ© (Ù…Ø§ÙÙŠØ§ ÙŠØ±Ù‰ Ù…Ø§ÙÙŠØ§)
                    if (phase.includes('Night') || phase === 'day') {
                        if (p.role === 'Ù…Ø§ÙÙŠØ§' && currentMafiaIds.includes(p.id)) roleText = 'ğŸ”ª Ù…Ø§ÙÙŠØ§';
                        else if (p.id === currentDetectiveId) roleText = 'ğŸ•µï¸ Ù…Ø­Ù‚Ù‚';
                        else if (p.id === currentDoctorId) roleText = 'ğŸ’Š Ø¯ÙƒØªÙˆØ±';
                        else roleText = 'ğŸ‘¤ Ù…ÙˆØ§Ø·Ù†';
                    } else {
                        roleText = 'ğŸ‘¤ ?';
                    }
                }
            }
            // Ø¥Ø¶Ø§ÙØ© Ø¹Ù„Ø§Ù…Ø© Ù…Ø­Ù…ÙŠ Ø¥Ø°Ø§ ÙƒØ§Ù† savedThisRoundØŸ
            let extraClass = p.isDead ? 'dead' : '';
            let savedBadge = (savedPlayerId === p.id && !p.isDead) ? '<div class="saved-tag">âœ… Ù…Ø­Ù…ÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ù„ÙŠÙ„Ø©</div>' : '';
            html += `<div class="player-card ${extraClass} ${p.selected ? 'selected' : ''}" data-id="${p.id}">
                <div class="player-name">${p.name}</div>
                <div class="player-role">${roleText}</div>
                ${savedBadge}
                <div class="player-status">${p.isDead ? 'âš°ï¸ Ù…ÙŠØª' : 'ğŸŸ¢ Ø­ÙŠ'}</div>
            </div>`;
        });
        playersContainer.innerHTML = html;

        // Ø¥Ø±ÙØ§Ù‚ Ø­Ø¯Ø« Ø§Ù„Ù†Ù‚Ø± Ù„ÙƒÙ„ Ø¨Ø·Ø§Ù‚Ø© (ØªØ­Ø¯ÙŠØ¯)
        document.querySelectorAll('.player-card').forEach(card => {
            card.addEventListener('click', (e) => {
                const id = parseInt(card.dataset.id);
                selectPlayer(id);
            });
        });
    }

    // ØªØ­Ø¯ÙŠØ¯ Ù„Ø§Ø¹Ø¨ Ø­Ø³Ø¨ Ø§Ù„Ù…Ø±Ø­Ù„Ø©
    function selectPlayer(id) {
        if (phase === 'setup') return;
        const player = players.find(p => p.id === id);
        if (!player || player.isDead) return;

        // Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ­Ø¯ÙŠØ¯Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
        players.forEach(p => p.selected = false);

        if (phase === 'mafiaNight' && currentMafiaIds.includes(getCurrentPlayerRoleId())) {
            // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø´Ø±Ù Ø§Ù„Ø­Ø§Ù„ÙŠ Ù‡Ùˆ Ù…Ø§ÙÙŠØ§ (Ù†ÙØªØ±Ø¶ Ø£Ù† Ù…Ù† ÙŠØ¶ØºØ· Ù‡Ùˆ Ù…Ø§ÙÙŠØ§ØŒ ÙƒÙ„ Ø§Ù„Ù…Ø§ÙÙŠØ§ ØªØ±Ù‰ Ø¨Ø¹Ø¶Ù‡Ø§)
            // Ù†Ø³Ù…Ø­ Ø¨ØªØ­Ø¯ÙŠØ¯ Ù‡Ø¯Ù ÙˆØ§Ø­Ø¯ Ù…Ø´ØªØ±Ùƒ
            if (player.role === 'Ù…Ø§ÙÙŠØ§' && currentMafiaIds.includes(player.id)) {
                addLog('âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ù„Ù„Ù…Ø§ÙÙŠØ§ Ù‚ØªÙ„ Ø£Ø­Ø¯ Ø§Ù„Ù…Ø§ÙÙŠØ§');
                return;
            }
            player.selected = true;
            mafiaVoteTarget = id;
        }
        else if (phase === 'detectiveNight' && currentDetectiveId === getCurrentPlayerRoleId()) {
            player.selected = true;
            detectiveTarget = id;
        }
        else if (phase === 'doctorNight' && currentDoctorId === getCurrentPlayerRoleId()) {
            player.selected = true;
            doctorTarget = id;
        }
        renderPlayers();
    }

    // Ù‡Ø°Ù‡ ØªØ­Ø§ÙƒÙŠ Ø£Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ Ù‡Ùˆ ÙƒÙ„ Ø§Ù„Ø£Ø¯ÙˆØ§Ø± (Ù„Ù„Ø¨Ø³Ø§Ø·Ø© Ù†Ø¹Ø±Ø¶ ÙƒÙ„ Ø§Ù„Ø£Ø²Ø±Ø§Ø±ØŒ Ù„ÙƒÙ† Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª ØªÙ†ÙØ° ÙƒØ£Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¯ÙˆØ§Ø± ØªÙ„Ø¹Ø¨)
    // Ù†Ø³Ù†Ø¯ ÙƒÙ„ Ø§Ù„Ø£Ø¯ÙˆØ§Ø± Ù„Ù…Ù† ÙŠØ´ØºÙ„ Ø§Ù„Ù„Ø¹Ø¨Ø©.
    function getCurrentPlayerRoleId() {
        // ØªØ±Ø¬Ø¹ id Ø¢Ø®Ø± Ù„Ø§Ø¹Ø¨ ØªÙ…Ø«ÙŠÙ„Ø§Ù‹ (Ù„Ù„Ø¨Ø³Ø§Ø·Ø© Ù†Ø¹ÙŠØ¯ -1 ÙˆÙ†ØªØ­Ù‚Ù‚ Ø¨Ø§Ù„ØµÙÙŠÙ)
        // ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù„Ø¨Ø³ÙŠØ·Ø© Ù†ÙØªØ±Ø¶ Ø£Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØªØ­ÙƒÙ… Ø¨ÙƒÙ„ Ø§Ù„Ø£Ø¯ÙˆØ§Ø±. Ù„Ø°Ø§ Ù†ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø£Ø¯ÙˆØ§Ø± Ø¨ØµÙØ§Ø¦Ù currentMafiaIds Ø¥Ù„Ø®.
        return -1; // Ù…Ø¤Ø´Ø± Ø®Ø§Øµ
    }

    // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø¯ÙˆØ§Ø± Ø§Ù„Ø­Ø³Ø§Ø³Ø© ÙÙŠ Ø§Ù„Ø£Ø³ÙÙ„
    function updateRoleReveal() {
        if (phase === 'mafiaNight') {
            let names = players.filter(p => currentMafiaIds.includes(p.id) && !p.isDead).map(p => p.name).join(' ØŒ ');
            roleSecretEl.innerText = `ğŸ”ª Ø£Ù†Øª Ù…Ø§ÙÙŠØ§. Ø²Ù…Ù„Ø§Ø¤Ùƒ: ${names || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯'}`;
        } else if (phase === 'detectiveNight' && currentDetectiveId) {
            let det = players.find(p => p.id === currentDetectiveId);
            roleSecretEl.innerText = `ğŸ•µï¸ Ø£Ù†Øª Ø§Ù„Ù…Ø­Ù‚Ù‚.`;
        } else if (phase === 'doctorNight' && currentDoctorId) {
            roleSecretEl.innerText = `ğŸ’Š Ø£Ù†Øª Ø§Ù„Ø¯ÙƒØªÙˆØ±.`;
        } else if (phase === 'day') {
            roleSecretEl.innerText = `â˜€ï¸ Ø§Ù„Ù†Ù‡Ø§Ø±ØŒ Ø§Ù„ÙƒÙ„ ÙŠØªÙ†Ø§Ù‚Ø´.`;
        } else roleSecretEl.innerText = 'ğŸ‘ï¸ Ø§Ù†ØªØ¸Ø± Ø¯ÙˆØ±Ùƒ';
    }

    // Ø¨Ø¯Ø¡ Ø§Ù„Ù„ÙŠÙ„ (Ø¨Ø¹Ø¯ Ø§Ù„Ù†Ù‡Ø§Ø± Ø£Ùˆ Ø¨Ø¯Ø§ÙŠØ©)
    function startNight() {
        if (players.filter(p => !p.isDead).length < 2) {
            addLog('âš°ï¸ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù†ØªÙ‡Øª, Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¹Ø¯Ø¯ ÙƒØ§Ù Ù„Ù„Ø£Ø­ÙŠØ§Ø¡');
            return;
        }
        phase = 'mafiaNight';
        round++;
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ØªØ­Ø¯ÙŠØ¯Ø§Øª ÙˆØ§Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù…Ø¤Ù‚ØªØ© (savedPlayerId ÙŠØ¨Ù‚Ù‰ Ù…Ù† Ø§Ù„Ù„ÙŠÙ„Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©)
        // Ù„ÙƒÙ† Ù†Ø­ØªØ§Ø¬ Ù„Ø¥Ø¸Ù‡Ø§Ø±Ù‡ ÙÙ‚Ø·.
        players.forEach(p => p.selected = false);
        mafiaVoteTarget = null;
        detectiveTarget = null;
        doctorTarget = null;
        // Ù†Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø±Ø­Ù„Ø©
        phaseEl.innerText = 'ğŸ”ª Ù„ÙŠÙ„Ø© Ø§Ù„Ù…Ø§ÙÙŠØ§';
        roundEl.innerText = `ğŸŒ™ Ø§Ù„Ù„ÙŠÙ„Ø© ${round}`;

        // Ø¥Ø®ÙØ§Ø¡ ÙƒÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… ÙˆØ¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…Ù†Ø§Ø³Ø¨
        setupDiv.classList.add('hidden');
        dayDiv.classList.add('hidden');
        mafiaDiv.classList.remove('hidden');
        detectiveDiv.classList.add('hidden');
        doctorDiv.classList.add('hidden');
        endNightBtn.classList.remove('hidden'); // Ø²Ø± Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¯ÙˆØ± (ÙŠØ¯ÙˆÙŠ)

        updateRoleReveal();
        renderPlayers();
        addLog(`ğŸŒ‘ Ø¨Ø¯Ø§ÙŠØ© Ù„ÙŠÙ„Ø© ${round} Â· Ø§Ù„Ù…Ø§ÙÙŠØ§ ØªØµÙˆØª`);
    }

    // Ø§Ù„ØªØ­ÙˆÙ„ Ø¥Ù„Ù‰ Ø¯ÙˆØ± Ø§Ù„Ù…Ø­Ù‚Ù‚ Ø¨Ø¹Ø¯ Ø§Ù„Ù…Ø§ÙÙŠØ§
    function endMafiaAndGoToDetective() {
        if (phase !== 'mafiaNight') return;
        if (!mafiaVoteTarget) {
            addLog('â“ Ù„Ù… ÙŠØµÙˆØª Ø§Ù„Ù…Ø§ÙÙŠØ§ Ø¹Ù„Ù‰ Ø£Ø­Ø¯! Ø§Ø³ØªÙ…Ø±Ø§Ø± Ø§Ù„Ù„ÙŠÙ„ Ø¨Ø¯ÙˆÙ† Ù‚ØªÙ„ØŸ');
        } else {
            addLog(`ğŸ”ª Ø§Ù„Ù…Ø§ÙÙŠØ§ ØµÙˆØªØª Ø¹Ù„Ù‰ ${players.find(p=>p.id===mafiaVoteTarget)?.name}`);
        }
        phase = 'detectiveNight';
        phaseEl.innerText = 'ğŸ•µï¸ Ù„ÙŠÙ„Ø© Ø§Ù„Ù…Ø­Ù‚Ù‚';
        mafiaDiv.classList.add('hidden');
        detectiveDiv.classList.remove('hidden');
        doctorDiv.classList.add('hidden');
        players.forEach(p => p.selected = false);
        detectiveTarget = null;
        updateRoleReveal();
        renderPlayers();
    }

    function endDetectiveAndGoToDoctor() {
        if (phase !== 'detectiveNight') return;
        if (detectiveTarget) {
            let targetPlayer = players.find(p => p.id === detectiveTarget);
            let role = targetPlayer.role;
            addLog(`ğŸ•µï¸ Ø§Ù„Ù…Ø­Ù‚Ù‚ Ø§Ø³ØªØ¬ÙˆØ¨ ${targetPlayer.name} ÙˆØ¯ÙˆØ±Ù‡: ${role}`);
            // Ø§Ù„Ù…Ø­Ù‚Ù‚ ÙÙ‚Ø· ÙŠØ±Ù‰ Ø§Ù„Ø±Ø³Ø§Ù„Ø© (Ù†Ø¹Ø±Ø¶Ù‡Ø§ ÙÙŠ Ø§Ù„Ø³Ø¬Ù„ Ø¹Ù„Ù†Ø§Ù‹ Ù‡Ù†Ø§ Ù„Ø£Ù†Ù†Ø§ Ù…Ø´Ø±ÙÙŠÙ†)
        } else {
            addLog('ğŸ•µï¸ Ø§Ù„Ù…Ø­Ù‚Ù‚ Ù„Ù… ÙŠØ³ØªØ¬ÙˆØ¨ Ø£Ø­Ø¯');
        }
        phase = 'doctorNight';
        phaseEl.innerText = 'ğŸ’Š Ù„ÙŠÙ„Ø© Ø§Ù„Ø¯ÙƒØªÙˆØ±';
        detectiveDiv.classList.add('hidden');
        doctorDiv.classList.remove('hidden');
        players.forEach(p => p.selected = false);
        doctorTarget = null;
        updateRoleReveal();
        renderPlayers();
    }

    function endDoctorAndGoToDay() {
        if (phase !== 'doctorNight') return;
        if (doctorTarget) {
            addLog(`ğŸ’Š Ø§Ù„Ø¯ÙƒØªÙˆØ± Ø­Ù…Ù‰ ${players.find(p=>p.id===doctorTarget)?.name}`);
        } else {
            addLog('ğŸ’Š Ø§Ù„Ø¯ÙƒØªÙˆØ± Ù„Ù… ÙŠØ­Ù… Ø£Ø­Ø¯');
        }
        // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù…Ø§ÙŠØ© ÙˆØ§Ù„Ù‚ØªÙ„
        let killedId = null;
        if (mafiaVoteTarget) {
            if (doctorTarget === mafiaVoteTarget) {
                savedPlayerId = mafiaVoteTarget;  // Ù…Ø­Ù…ÙŠ
                addLog(`ğŸ›¡ï¸ ${players.find(p=>p.id===mafiaVoteTarget)?.name} Ù†Ø¬Ø§ Ø¨ÙØ¶Ù„ Ø§Ù„Ø¯ÙƒØªÙˆØ±!`);
            } else {
                killedId = mafiaVoteTarget;
                savedPlayerId = null;
            }
        } else {
            savedPlayerId = null;
        }

        // Ù†Ù†ØªÙ‚Ù„ Ù„Ù„Ù†Ù‡Ø§Ø± Ø¨Ø¯ÙˆÙ† Ù‚ØªÙ„ ÙÙˆØ±ÙŠ
        phase = 'day';
        phaseEl.innerText = 'â˜€ï¸ Ø§Ù„Ù†Ù‡Ø§Ø±';
        doctorDiv.classList.add('hidden');
        dayDiv.classList.remove('hidden');
        mafiaDiv.classList.add('hidden');
        detectiveDiv.classList.add('hidden');
        endNightBtn.classList.add('hidden');

        // Ù†Ø¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ù† Ù‚ØªÙ„ Ø¥Ø°Ø§ ÙˆØ¬Ø¯
        if (killedId) {
            let victim = players.find(p => p.id === killedId);
            if (victim) {
                victim.isDead = true;
                addLog(`â˜ ï¸ Ù‚ØªÙ„ Ø§Ù„Ù„ÙŠÙ„Ø©: ${victim.name} (ÙƒØ§Ù† Ø¯ÙˆØ±Ù‡ ${victim.role})`);
            }
        } else {
            addLog(`âœ¨ Ù„Ø§ Ù‚ØªÙ„Ù‰ Ù‡Ø°Ù‡ Ø§Ù„Ù„ÙŠÙ„Ø©.`);
        }
        // reset saved after day reveals
        // Ù„ÙƒÙ† Ù†Ø­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ø¹Ù„Ø§Ù…Ø© saved Ù„Ù„Ø­Ù…Ø§ÙŠØ© Ø¨Ø§Ù„Ù†Ù‡Ø§Ø±
        renderPlayers();
        updateRoleReveal();
    }

    // Ù…Ø¹Ø§Ù„Ø¬ Ø§Ù„Ù†Ù‡Ø§Ø± (Ø²Ø± Ù…Ù† Ù‚ØªÙ„)
    function revealDay() {
        // Ø¨Ø§Ù„ÙØ¹Ù„ Ø·Ø¨Ù‚Ù†Ø§ ÙÙŠ endDoctorAndGoToDay
        addLog('ğŸ“¢ Ø§Ù„Ù†Ù‡Ø§Ø±: ØªÙ… Ø§Ù„ÙƒØ´Ù Ø¹Ù† Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù‚ØªÙ„ Ø£Ø¹Ù„Ø§Ù‡');
    }

    // Ø¨Ø¯Ø¡ Ø§Ù„Ù„ÙŠÙ„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©
    function nextNight() {
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† savedPlayerId (Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© ØªØ²ÙˆÙ„)
        savedPlayerId = null;
        // Ù†Ø²ÙŠÙ„ Ø¹Ù„Ø§Ù…Ø© Ù…Ø­Ù…ÙŠ
        players.forEach(p => p.selected = false);
        startNight();
    }

    // Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· ÙƒØ§Ù…Ù„
    function resetGame() {
        players = [];
        phase = 'setup';
        round = 0;
        currentMafiaIds = [];
        currentDetectiveId = null;
        currentDoctorId = null;
        mafiaVoteTarget = null;
        detectiveTarget = null;
        doctorTarget = null;
        savedPlayerId = null;
        phaseEl.innerText = 'ğŸŸ£ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯';
        roundEl.innerText = 'â³ 0 Ù„Ø§Ø¹Ø¨ÙŠÙ†';
        setupDiv.classList.remove('hidden');
        dayDiv.classList.add('hidden');
        mafiaDiv.classList.add('hidden');
        detectiveDiv.classList.add('hidden');
        doctorDiv.classList.add('hidden');
        endNightBtn.classList.add('hidden');
        roleSecretEl.innerText = 'ğŸ‘ï¸ Ø¯ÙˆØ±Ùƒ Ø³ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§ Ø¥Ø°Ø§ ÙƒÙ†Øª Ù…Ø§ÙÙŠØ§ / Ù…Ø­Ù‚Ù‚ / Ø¯ÙƒØªÙˆØ±';
        renderPlayers();
        addLog('ğŸ”„ ØªÙ…Øª Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù„Ø¹Ø¨Ø©');
    }

    // Ø¥Ø¶Ø§ÙØ© Ù„Ø§Ø¹Ø¨ Ø¬Ø¯ÙŠØ¯
    function addPlayer() {
        let name = prompt('Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨:', 'Ù„Ø§Ø¹Ø¨');
        if (!name) return;
        let newId = players.length > 0 ? Math.max(...players.map(p => p.id)) + 1 : 1;
        players.push({
            id: newId,
            name: name,
            role: 'Ù…ÙˆØ§Ø·Ù†', // Ù…Ø¤Ù‚Øª
            isDead: false,
            selected: false
        });
        roundEl.innerText = `ğŸ‘¥ ${players.length} Ù„Ø§Ø¹Ø¨ÙŠÙ†`;
        renderPlayers();
        addLog(`â• ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© ${name}`);
    }

    // Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© (ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø£Ø¯ÙˆØ§Ø±)
    function startGame() {
        if (players.length < 5) {
            alert('ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø¹Ø¯Ø¯ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† 5 Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');
            return;
        }
        // ØªÙˆØ²ÙŠØ¹ Ø¹Ø´ÙˆØ§Ø¦ÙŠ: 2 Ù…Ø§ÙÙŠØ§ (Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø¹Ø¯Ø¯>=6 Ù†Ø²ÙŠØ¯ Ø­Ø³Ø¨ Ø§Ù„Ø±ØºØ¨Ø©) Ù†Ø¨Ù‚ÙŠ 2 Ù…Ø§ÙÙŠØ§, 1 Ù…Ø­Ù‚Ù‚, 1 Ø¯ÙƒØªÙˆØ±, ÙˆØ§Ù„Ø¨Ø§Ù‚ÙŠ Ù…ÙˆØ§Ø·Ù†ÙˆÙ†
        let roleList = [];
        const count = players.length;
        for (let i=0; i<count; i++) roleList.push('Ù…ÙˆØ§Ø·Ù†');
        // Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ 2 Ù…Ø§ÙÙŠØ§
        if (count >= 5) {
            roleList[0] = 'Ù…Ø§ÙÙŠØ§';
            roleList[1] = 'Ù…Ø§ÙÙŠØ§';
            roleList[2] = 'Ù…Ø­Ù‚Ù‚';
            roleList[3] = 'Ø¯ÙƒØªÙˆØ±';
        }
        // Ø®Ù„Ø· Ø§Ù„Ø£Ø¯ÙˆØ§Ø±
        roleList = roleList.sort(() => Math.random() - 0.5);
        players.forEach((p, idx) => {
            p.role = roleList[idx] || 'Ù…ÙˆØ§Ø·Ù†';
            p.isDead = false;
        });
        // ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù…Ø¹Ø±ÙØ§Øª Ø§Ù„Ø®Ø§ØµØ©
        currentMafiaIds = players.filter(p => p.role === 'Ù…Ø§ÙÙŠØ§').map(p => p.id);
        currentDetectiveId = players.find(p => p.role === 'Ù…Ø­Ù‚Ù‚')?.id || null;
        currentDoctorId = players.find(p => p.role === 'Ø¯ÙƒØªÙˆØ±')?.id || null;

        round = 0;
        startNight();
        addLog('ğŸ² ÙˆØ²Ø¹Øª Ø§Ù„Ø£Ø¯ÙˆØ§Ø±: Ø§Ù„Ù…Ø§ÙÙŠØ§ ÙˆØ§Ù„Ù…Ø­Ù‚Ù‚ ÙˆØ§Ù„Ø¯ÙƒØªÙˆØ± ÙŠØ¹Ø±ÙÙˆÙ† Ø£Ù†ÙØ³Ù‡Ù…');
    }

    // Event listeners
    addPlayerBtn.addEventListener('click', addPlayer);
    startGameBtn.addEventListener('click', startGame);
    resetBtn.addEventListener('click', resetGame);

    mafiaVoteBtn.addEventListener('click', () => {
        if (phase !== 'mafiaNight') return;
        if (!mafiaVoteTarget) { alert('Ø§Ø®ØªØ± Ø´Ø®ØµØ§Ù‹ Ø£ÙˆÙ„Ø§'); return; }
        addLog(`ğŸ”ª Ø§Ù„Ù…Ø§ÙÙŠØ§ ØµÙˆÙ‘ØªØª Ø¹Ù„Ù‰ ${players.find(p=>p.id===mafiaVoteTarget)?.name}`);
        // Ù†Ù†ØªÙ‚Ù„ ÙŠØ¯ÙˆÙŠØ§Ù‹ Ø¨Ø¹Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¯ÙˆØ±
    });

    mafiaClearVote.addEventListener('click', () => {
        players.forEach(p => p.selected = false);
        mafiaVoteTarget = null;
        renderPlayers();
    });

    detectiveAskBtn.addEventListener('click', () => {
        if (phase !== 'detectiveNight' || !detectiveTarget) { alert('Ø§Ø®ØªØ± Ø´Ø®ØµØ§Ù‹'); return; }
        let p = players.find(p=>p.id===detectiveTarget);
        alert(`ğŸ” Ø¯ÙˆØ± ${p.name} Ù‡Ùˆ: ${p.role}`);
        addLog(`ğŸ•µï¸ Ø§Ù„Ù…Ø­Ù‚Ù‚ Ø¹Ø±Ù Ø£Ù† ${p.name} Ù‡Ùˆ ${p.role}`);
    });

    doctorHealBtn.addEventListener('click', () => {
        if (phase !== 'doctorNight' || !doctorTarget) { alert('Ø§Ø®ØªØ± Ø´Ø®ØµØ§Ù‹'); return; }
        addLog(`ğŸ’Š Ø§Ù„Ø¯ÙƒØªÙˆØ± Ø§Ø®ØªØ§Ø± Ø­Ù…Ø§ÙŠØ© ${players.find(p=>p.id===doctorTarget)?.name}`);
    });

    endNightBtn.addEventListener('click', () => {
        if (phase === 'mafiaNight') endMafiaAndGoToDetective();
        else if (phase === 'detectiveNight') endDetectiveAndGoToDoctor();
        else if (phase === 'doctorNight') endDoctorAndGoToDay();
    });

    revealKillBtn.addEventListener('click', () => {
        // ÙÙ‚Ø· Ø¹Ø±Ø¶ØŒ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¸Ù‡Ø±Øª Ø¢Ù„ÙŠØ§Ù‹
        addLog('â˜€ï¸ ØªÙ… Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ø¹Ù† Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù„ÙŠÙ„Ø©');
    });

    nextNightBtn.addEventListener('click', nextNight);

    // Ø¨Ø¯Ø§ÙŠØ© Ø³Ø±ÙŠØ¹Ø©: Ø£Ø¸Ù‡Ø§Ø± Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯
    resetGame();
})();
</script>
</body>
</html>